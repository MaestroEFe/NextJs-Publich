(()=>{var e={};e.id=3104,e.ids=[3104],e.modules={11185:e=>{"use strict";e.exports=require("mongoose")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},61212:e=>{"use strict";e.exports=require("async_hooks")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},86624:e=>{"use strict";e.exports=require("querystring")},76162:e=>{"use strict";e.exports=require("stream")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},84492:e=>{"use strict";e.exports=require("node:stream")},59045:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>m,tree:()=>l}),r(70279),r(38784),r(48663),r(98355);var s=r(91711),a=r(90149),i=r(82226),n=r.n(i),o=r(75394),d={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);r.d(t,d);let l=["",{children:["admin",{children:["cms",{children:["categories",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,70279)),"/home/efe/Documents/NextJs/NextJs-Public/AuthenticationSystem/apps/web/app/admin/cms/categories/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,38784)),"/home/efe/Documents/NextJs/NextJs-Public/AuthenticationSystem/apps/web/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,48663)),"/home/efe/Documents/NextJs/NextJs-Public/AuthenticationSystem/apps/web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,98355,23)),"next/dist/client/components/not-found-error"]}],c=["/home/efe/Documents/NextJs/NextJs-Public/AuthenticationSystem/apps/web/app/admin/cms/categories/page.tsx"],p="/admin/cms/categories/page",u={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/cms/categories/page",pathname:"/admin/cms/categories",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},27049:(e,t,r)=>{Promise.resolve().then(r.bind(r,55636))},55636:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var s=r(60134),a=r(31267);function i({initialCategories:e}){let[t,r]=(0,a.useState)(e),[i,n]=(0,a.useState)(""),[o,d]=(0,a.useState)(""),[l,c]=(0,a.useState)(""),[p,u]=(0,a.useState)("blog"),[m,g]=(0,a.useState)(!1),[x,y]=(0,a.useState)(null),h=async e=>{e.preventDefault(),g(!0),y(null);try{let e=await fetch("/api/cms/categories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i,description:o,parentId:l||null,postType:p})});if(!e.ok){let t=await e.json();throw Error(t.message||"Failed to create category")}let s=await e.json(),a={...s,parent:t.find(e=>e._id===s.parent)};r([...t,a]),n(""),d(""),c("")}catch(e){y(e.message)}finally{g(!1)}};return(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-6",children:"Manage Categories"}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md mb-6",children:[s.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Add New Category"}),(0,s.jsxs)("form",{onSubmit:h,children:[(0,s.jsxs)("div",{className:"mb-4",children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Name"}),s.jsx("input",{type:"text",id:"name",value:i,onChange:e=>n(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:!0})]}),(0,s.jsxs)("div",{className:"mb-4",children:[s.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Description (Optional)"}),s.jsx("textarea",{id:"description",value:o,onChange:e=>d(e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[s.jsx("label",{htmlFor:"parent",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Parent Category (Optional)"}),(0,s.jsxs)("select",{id:"parent",value:l,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[s.jsx("option",{value:"",children:"None"}),t.map(e=>s.jsx("option",{value:e._id,children:e.name},e._id))]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[s.jsx("label",{htmlFor:"postType",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Post Type"}),(0,s.jsxs)("select",{id:"postType",value:p,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[s.jsx("option",{value:"blog",children:"Blog"}),s.jsx("option",{value:"product",children:"Product"}),s.jsx("option",{value:"service",children:"Service"}),s.jsx("option",{value:"page",children:"Page"})]})]}),x&&s.jsx("p",{className:"text-red-500 text-sm mb-4",children:x}),s.jsx("button",{type:"submit",disabled:m,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:m?"Adding...":"Add Category"})]})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[s.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Existing Categories"}),s.jsx("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Slug"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Post Type"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Parent"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Description"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:t.map(e=>(0,s.jsxs)("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.name}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:e.slug}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:e.postType}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:e.parent?.name||"â€”"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:e.description})]},e._id))})]})})]})]})}},70279:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(31837),a=r(31872),i=r(4599),n=r(48199);let o=(0,r(71694).createProxy)(String.raw`/home/efe/Documents/NextJs/NextJs-Public/AuthenticationSystem/apps/web/app/admin/cms/categories/components/CategoryClient.tsx#default`);async function d(){await (0,i.uD)();try{let e=await n.WD.find().sort({name:1}).lean();return JSON.parse(JSON.stringify(e))}catch(e){return console.error("Failed to fetch categories:",e),[]}}async function l(){await (0,a.getServerSession)(i.Lz);let e=await d();return s.jsx(o,{initialCategories:e})}},48199:(e,t,r)=>{"use strict";r.d(t,{WD:()=>d,SO:()=>c,Vp:()=>n});var s=r(11185),a=r.n(s);let i=new s.Schema({name:{type:String,required:!0,unique:!0,trim:!0},slug:{type:String,unique:!0,index:!0,trim:!0},postType:{type:String,enum:["blog","product","service","page"],required:!0}},{timestamps:!0});i.pre("save",function(e){this.isModified("name")&&(this.slug=this.name.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"")),e()});let n=a().models.Tag||a().model("Tag",i),o=new s.Schema({name:{type:String,required:!0,unique:!0},slug:{type:String,unique:!0,index:!0},description:{type:String},parent:{type:s.Schema.Types.ObjectId,ref:"Category",default:null},postType:{type:String,enum:["blog","product","service","page"],required:!0}},{timestamps:!0});o.pre("save",function(e){this.isModified("name")&&(this.slug=this.name.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"")),e()});let d=a().models.Category||a().model("Category",o),l=new s.Schema({title:{type:String,required:!0,trim:!0},slug:{type:String,trim:!0,unique:!0,index:!0},content:{type:String,required:!0},excerpt:{type:String,trim:!0},featuredImage:{type:String},author:{type:s.Schema.Types.ObjectId,ref:"User",required:!0},status:{type:String,enum:["draft","published","archived"],default:"draft"},postType:{type:String,enum:["blog","product","service","page"],required:!0},tags:[{type:s.Schema.Types.ObjectId,ref:"Tag"}],categories:[{type:s.Schema.Types.ObjectId,ref:"Category"}],meta:{type:s.Schema.Types.Mixed},publishedAt:{type:Date}},{timestamps:!0});l.pre("save",function(e){this.isModified("title")&&(this.slug=this.title.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"")),e()});let c=a().models.Post||a().model("Post",l)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[8565,4355,4723,1551,1872,7455],()=>r(59045));module.exports=s})();