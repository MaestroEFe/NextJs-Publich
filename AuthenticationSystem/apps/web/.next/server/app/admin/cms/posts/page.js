(()=>{var e={};e.id=5882,e.ids=[5882],e.modules={11185:e=>{"use strict";e.exports=require("mongoose")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},61212:e=>{"use strict";e.exports=require("async_hooks")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},86624:e=>{"use strict";e.exports=require("querystring")},76162:e=>{"use strict";e.exports=require("stream")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},84492:e=>{"use strict";e.exports=require("node:stream")},69779:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>m,tree:()=>d}),s(96776),s(38784),s(48663),s(98355);var r=s(91711),a=s(90149),i=s(82226),n=s.n(i),l=s(75394),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["admin",{children:["cms",{children:["posts",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,96776)),"/home/efe/Documents/NextJs/NextJs-Public/AuthenticationSystem/apps/web/app/admin/cms/posts/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,38784)),"/home/efe/Documents/NextJs/NextJs-Public/AuthenticationSystem/apps/web/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,48663)),"/home/efe/Documents/NextJs/NextJs-Public/AuthenticationSystem/apps/web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,98355,23)),"next/dist/client/components/not-found-error"]}],c=["/home/efe/Documents/NextJs/NextJs-Public/AuthenticationSystem/apps/web/app/admin/cms/posts/page.tsx"],p="/admin/cms/posts/page",u={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/cms/posts/page",pathname:"/admin/cms/posts",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},21505:(e,t,s)=>{Promise.resolve().then(s.bind(s,86385))},86385:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var r=s(60134),a=s(31267);function i({initialPosts:e,initialCategories:t,initialTags:s}){let[i,n]=(0,a.useState)(e),[l,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)(null),[p,u]=(0,a.useState)(""),[m,x]=(0,a.useState)(""),[g,h]=(0,a.useState)("blog"),[y,b]=(0,a.useState)("draft"),[f,v]=(0,a.useState)([]),[j,N]=(0,a.useState)([]),S=async e=>{e.preventDefault(),o(!0),c(null);try{let e=await fetch("/api/cms/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:p,content:m,postType:g,status:y,categories:f,tags:j})});if(!e.ok){let t=await e.json();throw Error(t.message||"Failed to create post")}await e.json(),alert("Post created successfully!"),u(""),x(""),h("blog"),b("draft"),v([]),N([])}catch(e){c(e.message)}finally{o(!1)}};return(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-6",children:"Manage Posts"}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md mb-6",children:[r.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Add New Post"}),(0,r.jsxs)("form",{onSubmit:S,children:[(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Title"}),r.jsx("input",{type:"text",id:"title",value:p,onChange:e=>u(e.target.value),required:!0,className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Content"}),r.jsx("textarea",{id:"content",value:m,onChange:e=>x(e.target.value),rows:5,className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"postType",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Post Type"}),(0,r.jsxs)("select",{id:"postType",value:g,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600",children:[r.jsx("option",{value:"blog",children:"Blog"}),r.jsx("option",{value:"product",children:"Product"}),r.jsx("option",{value:"service",children:"Service"}),r.jsx("option",{value:"page",children:"Page"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Status"}),(0,r.jsxs)("select",{id:"status",value:y,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600",children:[r.jsx("option",{value:"draft",children:"Draft"}),r.jsx("option",{value:"published",children:"Published"}),r.jsx("option",{value:"archived",children:"Archived"})]})]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Categories"}),r.jsx("select",{multiple:!0,value:f,onChange:e=>v(Array.from(e.target.selectedOptions,e=>e.value)),className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600",children:t.map(e=>r.jsx("option",{value:e._id,children:e.name},e._id))})]}),(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Tags"}),r.jsx("select",{multiple:!0,value:j,onChange:e=>N(Array.from(e.target.selectedOptions,e=>e.value)),className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600",children:s.map(e=>r.jsx("option",{value:e._id,children:e.name},e._id))})]}),d&&r.jsx("p",{className:"text-red-500 text-sm mb-4",children:d}),r.jsx("button",{type:"submit",disabled:l,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",children:l?"Creating...":"Create Post"})]})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[r.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Existing Posts"}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"Title"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"Type"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"Author"})]})}),r.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:i.map(e=>(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.title}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.postType}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.status}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.author?.name||"N/A"})]},e._id))})]})})]})]})}},96776:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s(31837),a=s(31872),i=s(4599),n=s(48199);let l=(0,s(71694).createProxy)(String.raw`/home/efe/Documents/NextJs/NextJs-Public/AuthenticationSystem/apps/web/app/admin/cms/posts/components/PostClient.tsx#default`);async function o(){await (0,i.uD)();try{let[e,t,s]=await Promise.all([n.SO.find().populate("author","name").sort({createdAt:-1}).lean(),n.WD.find().sort({name:1}).lean(),n.Vp.find().sort({name:1}).lean()]);return{posts:JSON.parse(JSON.stringify(e)),categories:JSON.parse(JSON.stringify(t)),tags:JSON.parse(JSON.stringify(s))}}catch(e){return console.error("Failed to fetch CMS data:",e),{posts:[],categories:[],tags:[]}}}async function d(){await (0,a.getServerSession)(i.Lz);let{posts:e,categories:t,tags:s}=await o();return r.jsx(l,{initialPosts:e,initialCategories:t,initialTags:s})}},48199:(e,t,s)=>{"use strict";s.d(t,{WD:()=>o,SO:()=>c,Vp:()=>n});var r=s(11185),a=s.n(r);let i=new r.Schema({name:{type:String,required:!0,unique:!0,trim:!0},slug:{type:String,unique:!0,index:!0,trim:!0},postType:{type:String,enum:["blog","product","service","page"],required:!0}},{timestamps:!0});i.pre("save",function(e){this.isModified("name")&&(this.slug=this.name.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"")),e()});let n=a().models.Tag||a().model("Tag",i),l=new r.Schema({name:{type:String,required:!0,unique:!0},slug:{type:String,unique:!0,index:!0},description:{type:String},parent:{type:r.Schema.Types.ObjectId,ref:"Category",default:null},postType:{type:String,enum:["blog","product","service","page"],required:!0}},{timestamps:!0});l.pre("save",function(e){this.isModified("name")&&(this.slug=this.name.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"")),e()});let o=a().models.Category||a().model("Category",l),d=new r.Schema({title:{type:String,required:!0,trim:!0},slug:{type:String,trim:!0,unique:!0,index:!0},content:{type:String,required:!0},excerpt:{type:String,trim:!0},featuredImage:{type:String},author:{type:r.Schema.Types.ObjectId,ref:"User",required:!0},status:{type:String,enum:["draft","published","archived"],default:"draft"},postType:{type:String,enum:["blog","product","service","page"],required:!0},tags:[{type:r.Schema.Types.ObjectId,ref:"Tag"}],categories:[{type:r.Schema.Types.ObjectId,ref:"Category"}],meta:{type:r.Schema.Types.Mixed},publishedAt:{type:Date}},{timestamps:!0});d.pre("save",function(e){this.isModified("title")&&(this.slug=this.title.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"")),e()});let c=a().models.Post||a().model("Post",d)}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[8565,4355,4723,1551,1872,7455],()=>s(69779));module.exports=r})();