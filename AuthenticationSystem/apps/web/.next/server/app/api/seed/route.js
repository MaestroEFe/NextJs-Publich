"use strict";(()=>{var e={};e.id=2520,e.ids=[2520],e.modules={11185:e=>{e.exports=require("mongoose")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},61212:e=>{e.exports=require("async_hooks")},84770:e=>{e.exports=require("crypto")},76162:e=>{e.exports=require("stream")},21764:e=>{e.exports=require("util")},84492:e=>{e.exports=require("node:stream")},48149:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>f,patchFetch:()=>S,requestAsyncStorage:()=>h,routeModule:()=>g,serverHooks:()=>w,staticGenerationAsyncStorage:()=>y});var r={};s.r(r),s.d(r,{GET:()=>c});var a=s(13686),i=s(90149),n=s(74787),o=s(87107),p=s(85),u=s(48199),l=s(69376),d=s(61343),m=s.n(d);async function c(){try{await (0,p.uD)(process.env.MONGODB_URI);let e="admin@example.com";if(await p.n5.findOne({email:e}))return o.NextResponse.json({message:"Admin user already exists."},{status:409});let t=await m().genSalt(10),s=await m().hash("admin123",t),r=new p.n5({name:"Admin User",email:e,password:s,group:"admin"});await r.save();let a=[{name:"John Doe",email:"john@example.com",password:await m().hash("password123",t),group:"user"},{name:"Jane Smith",email:"jane@example.com",password:await m().hash("password123",t),group:"user"}];await p.n5.insertMany(a);let i=[{title:"Getting Started with Next.js",slug:"getting-started-with-nextjs",content:"This is a comprehensive guide to getting started with Next.js...",summary:"Learn the basics of Next.js and build your first application.",type:"blog",published:!0,tags:["nextjs","react","javascript"],author:r._id},{title:"Premium Web Hosting",slug:"premium-web-hosting",content:"Our premium web hosting includes...",summary:"High-performance web hosting for your business.",type:"service",published:!0,price:29.99,features:["99.9% Uptime","24/7 Support","Free SSL"],category:"hosting",author:r._id},{title:"Wireless Headphones",slug:"wireless-headphones",content:"Experience crystal clear sound with our premium wireless headphones...",summary:"High-quality wireless headphones with noise cancellation.",type:"product",published:!0,price:199.99,features:["Noise Cancelling","30hr Battery","Bluetooth 5.0"],category:"electronics",author:r._id}];return await u.SO.insertMany(i),await l.r.insertMany([{name:"Mike Johnson",email:"mike@example.com",phone:"+1234567890",subject:"Inquiry about services",message:"I would like to know more about your web development services."},{name:"Sarah Williams",email:"sarah@example.com",message:"Just wanted to say I love your blog posts!"}]),o.NextResponse.json({success:!0,message:"Database seeded successfully!",users:3,posts:3,contacts:2})}catch(e){return console.error("Error seeding database:",e),o.NextResponse.json({success:!1,message:"Error seeding database",error:e instanceof Error?e.message:"Unknown error"},{status:500})}}let g=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/seed/route",pathname:"/api/seed",filename:"route",bundlePath:"app/api/seed/route"},resolvedPagePath:"/home/efe/Documents/NextJs/NextJs-Public/AuthenticationSystem/apps/web/app/api/seed/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:h,staticGenerationAsyncStorage:y,serverHooks:w}=g,f="/api/seed/route";function S(){return(0,n.patchFetch)({serverHooks:w,staticGenerationAsyncStorage:y})}},85:(e,t,s)=>{s.d(t,{Jp:()=>f,n5:()=>l,uD:()=>i,no:()=>d,yN:()=>m,GJ:()=>c,Cz:()=>y,gV:()=>b});var r=s(11185),a=s.n(r);let i=async e=>{if(a().connections[0].readyState)return!0;try{return await a().connect(e),console.log("MongoDB connected successfully."),!0}catch(e){return console.error("Error connecting to MongoDB:",e),!1}};var n=s(4612),o=s(61343),p=s.n(o);let u=new r.Schema({name:{type:String,required:[!0,"Please provide your name"],trim:!0},email:{type:String,required:[!0,"Please provide your email"],unique:!0,trim:!0,lowercase:!0,match:[/.+@.+\..+/,"Please enter a valid email address"]},password:{type:String,required:[!0,"Please provide a password"],minlength:6,select:!1},group:{type:String,enum:["user","admin"],default:"user"},isVerified:{type:Boolean,default:!1},verificationToken:{type:String,select:!1},verificationTokenExpires:{type:Date,select:!1},passwordResetToken:{type:String,select:!1},passwordResetTokenExpires:{type:Date,select:!1}},{timestamps:!0});u.pre("save",async function(e){if(!this.isModified("password")||!this.password)return e();let t=await p().genSalt(10);this.password=await p().hash(this.password,t),e()}),u.methods.comparePassword=async function(e){return!!this.password&&await p().compare(e,this.password)};let l=a().models.User||a().model("User",u),d=(e,t)=>({providers:[(0,n.Z)({name:"Credentials",credentials:{email:{label:"Email",type:"email"},password:{label:"Password",type:"password"}},async authorize(t){if(await i(e),!t?.email||!t?.password)return null;let s=await l.findOne({email:t.email}).select("+password");return s&&await s.comparePassword(t.password)?{id:s._id.toString(),name:s.name,email:s.email,group:s.group}:null}})],session:{strategy:"jwt"},callbacks:{jwt:async({token:e,user:t})=>(t&&(e.id=t.id,e.group=t.group),e),session:async({session:e,token:t})=>(e.user&&(e.user.id=t.id,e.user.group=t.group),e)},pages:{signIn:"/login"},secret:t}),m=e=>!!e&&["admin","staff"].includes(e.toLowerCase()),c=e=>e?.user?.group==="admin",g=new(s(88444)).R(process.env.RESEND_API_KEY),h=process.env.EMAIL_FROM,y=async e=>{if(!process.env.RESEND_API_KEY||!h){let e="Email service is not configured. Please set RESEND_API_KEY and EMAIL_FROM environment variables.";return console.error(e),{success:!1,error:Error(e)}}try{let t=e.from||h,{data:s,error:r}=await g.emails.send({from:t,to:e.to,subject:e.subject,html:e.html});if(r)return console.error("Error sending email:",r),{success:!1,error:r};if(!s){let e=Error("Email sending failed without an explicit error.");return console.error(e),{success:!1,error:e}}return console.log("Email sent successfully:",s.id),{success:!0,data:s}}catch(e){return console.error("An unexpected error occurred in sendEmail:",e),{success:!1,error:e}}},w=new r.Schema({email:{type:String,required:!0},token:{type:String,required:!0,unique:!0},expiresAt:{type:Date,required:!0,expires:"1h"}}),f=a().models.PasswordResetToken||a().model("PasswordResetToken",w);var S=s(2608);S.z.object({name:S.z.string().min(3,{message:"Name must be at least 3 characters long"}),email:S.z.string().email({message:"Invalid email address"}),password:S.z.string().min(6,{message:"Password must be at least 6 characters long"})}),S.z.object({email:S.z.string().email({message:"Invalid email address"}),password:S.z.string().min(1,{message:"Password is required"})});let b=S.z.object({name:S.z.string().min(3).optional(),email:S.z.string().email().optional()});S.z.object({password:S.z.string().min(6,{message:"Password must be at least 6 characters long"})})},48199:(e,t,s)=>{s.d(t,{WD:()=>p,SO:()=>l,Vp:()=>n});var r=s(11185),a=s.n(r);let i=new r.Schema({name:{type:String,required:!0,unique:!0,trim:!0},slug:{type:String,unique:!0,index:!0,trim:!0},postType:{type:String,enum:["blog","product","service","page"],required:!0}},{timestamps:!0});i.pre("save",function(e){this.isModified("name")&&(this.slug=this.name.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"")),e()});let n=a().models.Tag||a().model("Tag",i),o=new r.Schema({name:{type:String,required:!0,unique:!0},slug:{type:String,unique:!0,index:!0},description:{type:String},parent:{type:r.Schema.Types.ObjectId,ref:"Category",default:null},postType:{type:String,enum:["blog","product","service","page"],required:!0}},{timestamps:!0});o.pre("save",function(e){this.isModified("name")&&(this.slug=this.name.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"")),e()});let p=a().models.Category||a().model("Category",o),u=new r.Schema({title:{type:String,required:!0,trim:!0},slug:{type:String,trim:!0,unique:!0,index:!0},content:{type:String,required:!0},excerpt:{type:String,trim:!0},featuredImage:{type:String},author:{type:r.Schema.Types.ObjectId,ref:"User",required:!0},status:{type:String,enum:["draft","published","archived"],default:"draft"},postType:{type:String,enum:["blog","product","service","page"],required:!0},tags:[{type:r.Schema.Types.ObjectId,ref:"Tag"}],categories:[{type:r.Schema.Types.ObjectId,ref:"Category"}],meta:{type:r.Schema.Types.Mixed},publishedAt:{type:Date}},{timestamps:!0});u.pre("save",function(e){this.isModified("title")&&(this.slug=this.title.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"")),e()});let l=a().models.Post||a().model("Post",u)},69376:(e,t,s)=>{s.d(t,{r:()=>n});var r=s(11185),a=s.n(r);let i=new r.Schema({user:{type:r.Schema.Types.ObjectId,ref:"User",required:!0,unique:!0},company:{type:String,trim:!0},jobTitle:{type:String,trim:!0},tags:{type:[String],default:[]},notes:{type:String}},{timestamps:!0}),n=a().models.Contact||a().model("Contact",i)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[8565,4355,7668],()=>s(48149));module.exports=r})();