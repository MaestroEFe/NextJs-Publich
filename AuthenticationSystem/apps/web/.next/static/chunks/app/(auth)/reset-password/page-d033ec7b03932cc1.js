(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{8811:function(e,s,r){Promise.resolve().then(r.bind(r,5953))},5953:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return u}});var t=r(5979),a=r(8584),o=r(8104),n=r(8733),d=r(183),l=r(1883);let c=l.Ry({password:l.Z_().min(6,{message:"Password must be at least 6 characters."}),confirmPassword:l.Z_()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function i(){let e=(0,o.useRouter)(),s=(0,o.useSearchParams)().get("token"),[r,l]=(0,a.useState)(null),[i,u]=(0,a.useState)(null),[m,h]=(0,a.useState)(!1),{register:w,handleSubmit:f,formState:{errors:x}}=(0,n.cI)({resolver:(0,d.F)(c)});(0,a.useEffect)(()=>{s||l("Invalid or missing password reset token.")},[s]);let p=async r=>{if(!s){l("Cannot reset password without a valid token.");return}h(!0),l(null),u(null);try{let t=await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:s,password:r.password})}),a=await t.json();t.ok?(u(a.message),setTimeout(()=>e.push("/login"),3e3)):l(a.message||"An unknown error occurred.")}catch(e){l("Failed to connect to the server. Please try again.")}h(!1)};return i?(0,t.jsxs)("div",{className:"max-w-md w-full bg-white p-8 rounded-lg shadow-md text-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-green-600 mb-4",children:"Success!"}),(0,t.jsx)("p",{className:"text-gray-700",children:i}),(0,t.jsx)("p",{className:"text-gray-500 mt-2",children:"Redirecting to login..."})]}):(0,t.jsxs)("div",{className:"max-w-md w-full bg-white p-8 rounded-lg shadow-md",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-center mb-6",children:"Reset Your Password"}),(0,t.jsxs)("form",{onSubmit:f(p),className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"New Password"}),(0,t.jsx)("input",{id:"password",type:"password",...w("password"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),x.password&&(0,t.jsx)("p",{className:"text-sm text-red-600 mt-1",children:x.password.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),(0,t.jsx)("input",{id:"confirmPassword",type:"password",...w("confirmPassword"),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),x.confirmPassword&&(0,t.jsx)("p",{className:"text-sm text-red-600 mt-1",children:x.confirmPassword.message})]}),r&&(0,t.jsx)("p",{className:"text-sm text-red-600 text-center",children:r}),(0,t.jsx)("button",{type:"submit",disabled:m||!s,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:bg-blue-400 transition duration-300",children:m?"Resetting...":"Reset Password"})]})]})}function u(){return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)("div",{children:"Loading..."}),children:(0,t.jsx)(i,{})})})}},8104:function(e,s,r){"use strict";var t=r(1922);r.o(t,"useParams")&&r.d(s,{useParams:function(){return t.useParams}}),r.o(t,"useRouter")&&r.d(s,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(s,{useSearchParams:function(){return t.useSearchParams}})}},function(e){e.O(0,[883,183,232,922,744],function(){return e(e.s=8811)}),_N_E=e.O()}]);