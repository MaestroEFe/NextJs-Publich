(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[104],{3235:function(e,t,a){Promise.resolve().then(a.bind(a,7946))},7946:function(e,t,a){"use strict";a.d(t,{default:function(){return d}});var r=a(5979),s=a(8584);function d(e){let{initialCategories:t}=e,[a,d]=(0,s.useState)(t),[i,n]=(0,s.useState)(""),[o,l]=(0,s.useState)(""),[c,x]=(0,s.useState)(""),[g,m]=(0,s.useState)("blog"),[p,u]=(0,s.useState)(!1),[h,y]=(0,s.useState)(null),b=async e=>{e.preventDefault(),u(!0),y(null);try{let e=await fetch("/api/cms/categories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i,description:o,parentId:c||null,postType:g})});if(!e.ok){let t=await e.json();throw Error(t.message||"Failed to create category")}let t=await e.json(),r={...t,parent:a.find(e=>e._id===t.parent)};d([...a,r]),n(""),l(""),x("")}catch(e){y(e.message)}finally{u(!1)}};return(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-6",children:"Manage Categories"}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Add New Category"}),(0,r.jsxs)("form",{onSubmit:b,children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Name"}),(0,r.jsx)("input",{type:"text",id:"name",value:i,onChange:e=>n(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:!0})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Description (Optional)"}),(0,r.jsx)("textarea",{id:"description",value:o,onChange:e=>l(e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"parent",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Parent Category (Optional)"}),(0,r.jsxs)("select",{id:"parent",value:c,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[(0,r.jsx)("option",{value:"",children:"None"}),a.map(e=>(0,r.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"postType",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Post Type"}),(0,r.jsxs)("select",{id:"postType",value:g,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[(0,r.jsx)("option",{value:"blog",children:"Blog"}),(0,r.jsx)("option",{value:"product",children:"Product"}),(0,r.jsx)("option",{value:"service",children:"Service"}),(0,r.jsx)("option",{value:"page",children:"Page"})]})]}),h&&(0,r.jsx)("p",{className:"text-red-500 text-sm mb-4",children:h}),(0,r.jsx)("button",{type:"submit",disabled:p,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:p?"Adding...":"Add Category"})]})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Existing Categories"}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,r.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Slug"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Post Type"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Parent"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Description"})]})}),(0,r.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:a.map(e=>{var t;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.name}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:e.slug}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:e.postType}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:(null===(t=e.parent)||void 0===t?void 0:t.name)||"â€”"}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:e.description})]},e._id)})})]})})]})]})}}},function(e){e.O(0,[232,922,744],function(){return e(e.s=3235)}),_N_E=e.O()}]);