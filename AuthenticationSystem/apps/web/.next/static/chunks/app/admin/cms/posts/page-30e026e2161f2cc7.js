(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[882],{1853:function(e,t,a){Promise.resolve().then(a.bind(a,3056))},3056:function(e,t,a){"use strict";a.d(t,{default:function(){return l}});var s=a(5979),r=a(8584);function l(e){let{initialPosts:t,initialCategories:a,initialTags:l}=e,[d,i]=(0,r.useState)(t),[n,o]=(0,r.useState)(!1),[c,m]=(0,r.useState)(null),[x,u]=(0,r.useState)(""),[h,p]=(0,r.useState)(""),[g,b]=(0,r.useState)("blog"),[y,j]=(0,r.useState)("draft"),[v,f]=(0,r.useState)([]),[N,k]=(0,r.useState)([]),w=async e=>{e.preventDefault(),o(!0),m(null);try{let e=await fetch("/api/cms/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:x,content:h,postType:g,status:y,categories:v,tags:N})});if(!e.ok){let t=await e.json();throw Error(t.message||"Failed to create post")}await e.json(),alert("Post created successfully!"),u(""),p(""),b("blog"),j("draft"),f([]),k([])}catch(e){m(e.message)}finally{o(!1)}};return(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-6",children:"Manage Posts"}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Add New Post"}),(0,s.jsxs)("form",{onSubmit:w,children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Title"}),(0,s.jsx)("input",{type:"text",id:"title",value:x,onChange:e=>u(e.target.value),required:!0,className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Content"}),(0,s.jsx)("textarea",{id:"content",value:h,onChange:e=>p(e.target.value),rows:5,className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"postType",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Post Type"}),(0,s.jsxs)("select",{id:"postType",value:g,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600",children:[(0,s.jsx)("option",{value:"blog",children:"Blog"}),(0,s.jsx)("option",{value:"product",children:"Product"}),(0,s.jsx)("option",{value:"service",children:"Service"}),(0,s.jsx)("option",{value:"page",children:"Page"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Status"}),(0,s.jsxs)("select",{id:"status",value:y,onChange:e=>j(e.target.value),className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600",children:[(0,s.jsx)("option",{value:"draft",children:"Draft"}),(0,s.jsx)("option",{value:"published",children:"Published"}),(0,s.jsx)("option",{value:"archived",children:"Archived"})]})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Categories"}),(0,s.jsx)("select",{multiple:!0,value:v,onChange:e=>f(Array.from(e.target.selectedOptions,e=>e.value)),className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600",children:a.map(e=>(0,s.jsx)("option",{value:e._id,children:e.name},e._id))})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Tags"}),(0,s.jsx)("select",{multiple:!0,value:N,onChange:e=>k(Array.from(e.target.selectedOptions,e=>e.value)),className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600",children:l.map(e=>(0,s.jsx)("option",{value:e._id,children:e.name},e._id))})]}),c&&(0,s.jsx)("p",{className:"text-red-500 text-sm mb-4",children:c}),(0,s.jsx)("button",{type:"submit",disabled:n,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",children:n?"Creating...":"Create Post"})]})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Existing Posts"}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,s.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"Title"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"Type"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"Author"})]})}),(0,s.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:d.map(e=>{var t;return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.title}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.postType}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.status}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(null===(t=e.author)||void 0===t?void 0:t.name)||"N/A"})]},e._id)})})]})})]})]})}}},function(e){e.O(0,[232,922,744],function(){return e(e.s=1853)}),_N_E=e.O()}]);