(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[544],{3510:function(e,s,a){Promise.resolve().then(a.bind(a,629))},629:function(e,s,a){"use strict";a.r(s);var r=a(5979),l=a(8584),t=a(9182),n=a(8104),d=a(72);s.default=()=>{let{data:e,status:s}=(0,t.useSession)(),a=(0,n.useRouter)(),[i,u]=(0,l.useState)([]),[o,c]=(0,l.useState)(!0);(0,l.useEffect)(()=>{var r;"unauthenticated"===s?a.push("/login"):(null==e?void 0:null===(r=e.user)||void 0===r?void 0:r.group)!=="admin"&&a.push("/dashboard")},[e,s,a]),(0,l.useEffect)(()=>{var s;let a=async()=>{try{let e=await fetch("/api/admin/admins");if(e.ok){let s=await e.json();u(s)}else console.error("Failed to fetch admins")}catch(e){console.error("An error occurred while fetching admins:",e)}c(!1)};(null==e?void 0:null===(s=e.user)||void 0===s?void 0:s.group)==="admin"&&a()},[e]);let h=e=>{u(i.map(s=>s._id===e._id?e:s))},x=e=>{u(i.filter(s=>s._id!==e))};return o||"loading"===s?(0,r.jsx)("p",{children:"Loading..."}):(0,r.jsxs)("div",{className:"container mx-auto p-4",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Manage Admins"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(e=>(0,r.jsx)(d.Z,{user:e,onUpdate:h,onDelete:x},e._id))})]})}},72:function(e,s,a){"use strict";var r=a(5979),l=a(8584);s.Z=e=>{let{user:s,onUpdate:a,onDelete:t}=e,[n,d]=(0,l.useState)(!1),[i,u]=(0,l.useState)(s.name),[o,c]=(0,l.useState)(s.email),[h,x]=(0,l.useState)(s.group);return(0,r.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-md",children:n?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Name"}),(0,r.jsx)("input",{type:"text",value:i,onChange:e=>u(e.target.value),className:"w-full p-2 border border-gray-300 rounded"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Email"}),(0,r.jsx)("input",{type:"email",value:o,onChange:e=>c(e.target.value),className:"w-full p-2 border border-gray-300 rounded"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Group"}),(0,r.jsx)("input",{type:"text",value:h,onChange:e=>x(e.target.value),className:"w-full p-2 border border-gray-300 rounded"})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:()=>{a({...s,name:i,email:o,group:h}),d(!1)},className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Save"}),(0,r.jsx)("button",{onClick:()=>d(!1),className:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400",children:"Cancel"})]})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold",children:s.name}),(0,r.jsx)("p",{className:"text-gray-600",children:s.email}),(0,r.jsxs)("p",{className:"text-gray-500",children:["Group: ",s.group]}),(0,r.jsxs)("div",{className:"flex space-x-2 mt-4",children:[(0,r.jsx)("button",{onClick:()=>d(!0),className:"bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>t(s._id),className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600",children:"Delete"})]})]})})}},8104:function(e,s,a){"use strict";var r=a(1922);a.o(r,"useParams")&&a.d(s,{useParams:function(){return r.useParams}}),a.o(r,"useRouter")&&a.d(s,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(s,{useSearchParams:function(){return r.useSearchParams}})}},function(e){e.O(0,[182,232,922,744],function(){return e(e.s=3510)}),_N_E=e.O()}]);