(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[686],{6771:function(e,a,s){Promise.resolve().then(s.bind(s,5485))},5485:function(e,a,s){"use strict";s.r(a);var t=s(5979),r=s(8584),l=s(9182),n=s(8104),i=s(72);a.default=()=>{let{data:e,status:a}=(0,l.useSession)(),s=(0,n.useRouter)(),[d,o]=(0,r.useState)([]),[u,c]=(0,r.useState)(!0),[h,m]=(0,r.useState)("");(0,r.useEffect)(()=>{var t;"unauthenticated"===a?s.push("/login"):"authenticated"===a&&(null===(t=e.user)||void 0===t?void 0:t.group)!=="admin"&&s.push("/dashboard")},[e,a,s]),(0,r.useEffect)(()=>{var a;let s=async()=>{try{let e=await fetch("/api/admin/users");if(!e.ok)throw Error("Failed to fetch users");let a=await e.json();o(a)}catch(e){m(e.message)}finally{c(!1)}};(null==e?void 0:null===(a=e.user)||void 0===a?void 0:a.group)==="admin"&&s()},[e]);let p=async e=>{try{if(!(await fetch("/api/admin/users/".concat(e._id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to update user");o(d.map(a=>a._id===e._id?e:a))}catch(e){m(e.message)}},x=async e=>{try{if(!(await fetch("/api/admin/users/".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete user");o(d.filter(a=>a._id!==e))}catch(e){m(e.message)}};return u?(0,t.jsx)("p",{children:"Loading..."}):h?(0,t.jsx)("p",{className:"text-red-500",children:h}):(0,t.jsxs)("div",{className:"container mx-auto p-4",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Manage Users"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(e=>(0,t.jsx)(i.Z,{user:e,onUpdate:p,onDelete:x},e._id))})]})}},72:function(e,a,s){"use strict";var t=s(5979),r=s(8584);a.Z=e=>{let{user:a,onUpdate:s,onDelete:l}=e,[n,i]=(0,r.useState)(!1),[d,o]=(0,r.useState)(a.name),[u,c]=(0,r.useState)(a.email),[h,m]=(0,r.useState)(a.group);return(0,t.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-md",children:n?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{children:"Name"}),(0,t.jsx)("input",{type:"text",value:d,onChange:e=>o(e.target.value),className:"w-full p-2 border border-gray-300 rounded"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{children:"Email"}),(0,t.jsx)("input",{type:"email",value:u,onChange:e=>c(e.target.value),className:"w-full p-2 border border-gray-300 rounded"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{children:"Group"}),(0,t.jsx)("input",{type:"text",value:h,onChange:e=>m(e.target.value),className:"w-full p-2 border border-gray-300 rounded"})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("button",{onClick:()=>{s({...a,name:d,email:u,group:h}),i(!1)},className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Save"}),(0,t.jsx)("button",{onClick:()=>i(!1),className:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400",children:"Cancel"})]})]}):(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-bold",children:a.name}),(0,t.jsx)("p",{className:"text-gray-600",children:a.email}),(0,t.jsxs)("p",{className:"text-gray-500",children:["Group: ",a.group]}),(0,t.jsxs)("div",{className:"flex space-x-2 mt-4",children:[(0,t.jsx)("button",{onClick:()=>i(!0),className:"bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600",children:"Edit"}),(0,t.jsx)("button",{onClick:()=>l(a._id),className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600",children:"Delete"})]})]})})}},8104:function(e,a,s){"use strict";var t=s(1922);s.o(t,"useParams")&&s.d(a,{useParams:function(){return t.useParams}}),s.o(t,"useRouter")&&s.d(a,{useRouter:function(){return t.useRouter}}),s.o(t,"useSearchParams")&&s.d(a,{useSearchParams:function(){return t.useSearchParams}})}},function(e){e.O(0,[182,232,922,744],function(){return e(e.s=6771)}),_N_E=e.O()}]);